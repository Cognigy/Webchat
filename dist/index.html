<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>webchat development</title>
</head>

<body>
    <script src="./webchat.js"></script>
    <script>

    // Initialize a sessionId, undefined by default.
    let sessionId;

    function storeSessionId(sessionId) {
      if (window.localStorage) {
        localStorage.setItem("SESSIONID", sessionId);
      }
    }

    // in case LocalStorage is supported...
    if (window.localStorage) {
      // try to load a previously stored sessionId from the LocalStorage
      sessionId = window.localStorage.getItem("SESSIONID");

      // in case there was no previously stored sessionId,
      // generate one and store it into LocalStorage
      if (!sessionId) {
        sessionId = "session-" + Date.now() * Math.random();
        storeSessionId(sessionId);
        console.log("----", sessionId);
      }
    }




            initWebchat('https://endpoint.test/476df0c627f662593dc22e718f522b8cd15456df5228fc6a736dec40b70b13c0', {
            // userId: "user1",
            sessionId,
            // settings: {
            //     layout: {
            //         watermark: "default",
            //         watermarkText: "Some Random Watermark"
            //     },
            //     unreadMessages: {
            //         enableIndicator: true,
            //         enableBadge: true,
            //         enablePreview: true,
            //         enableSound: true
            //     },
            //     teaserMessage:{
            //         showInChat: true,
            //         teaserMessageDelay: 5000,
            //         text: "Hi there!"
            //         },
            //     startBehavior: {
            //         getStartedText: ""
            //     },
            //     widgetSettings: {
            //         enableFocusTrap: true,
            //     }
            // },
        }).then(function (webchat) {
            window.cognigyWebchat = webchat;
            webchat.open();
			// webchat.startConversation();
			webchat.registerAnalyticsService(event => {
            if (event.type === "webchat/switch-session") {
              console.log(event)
                storeSessionId(event.payload);
            }
			});
        })
    </script>
</body>

</html>
